Cargo.lock --- TOML
135                                                                 135 
136 [[package]]                                                     136 [[package]]
137 name = "local_issues_lib"                                       137 name = "local_issues_lib"
138 version = "0.3.1"                                               138 version = "0.3.2"
139 dependencies = [                                                139 dependencies = [
140  "chrono",                                                      140  "chrono",
141  "serde",                                                       141  "serde",

Cargo.toml --- TOML
1 [package]                                                         1 [package]
2 name = "local_issues_lib"                                         2 name = "local_issues_lib"
3 description = "the lib provide feature that local issue (like a g 3 description = "the lib provide feature that local issue (like a g
. ithub)"                                                           . ithub)"
4 version = "0.3.1"                                                 4 version = "0.3.2"
5 authors = ["Uliboooo"]                                            5 authors = ["Uliboooo"]
6 edition = "2024"                                                  6 edition = "2024"
7 license = "MIT OR Apache-2.0"                                     7 license = "MIT OR Apache-2.0"

src/lib.rs --- 1/5 --- Rust
37 37     /// count of delted this issue
38 38     MarkedAsDelete(i32),
39 39 }
.. 40 impl Display for Status {
.. 41     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
.. 42         match self {
.. 43             Status::Open => write!(f, "open"),
.. 44             Status::Closed(closed) => write!(f, "closed{}", closed),
.. 45             Status::MarkedAsDelete(c) => write!(f, "Delete at {}", c),
.. 46         }
.. 47     }
.. 48 }
40 49 
41 50 #[derive(Debug, Serialize, Deserialize, Default, Clone, PartialEq, PartialOrd, Eq)]
42 51 pub enum Closed {
43 52     #[default]
44 53     Resolved,
45 54     NotResolved,
46 55 }
.. 56 impl Display for Closed {
.. 57     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
.. 58         match self {
.. 59             Closed::Resolved => write!(f, "Resolved"),
.. 60             Closed::NotResolved => write!(f, "NotResolved"),
.. 61         }
.. 62     }
.. 63 }
47 64 
48 65 #[derive(Default, Debug, Serialize, Deserialize, Clone)]
49 66 pub struct Issue {

src/lib.rs --- 2/5 --- Rust
118     }                                                           135     }
119                                                                 136 
120     fn is_opend(&self) -> bool {                                137     fn is_opend(&self) -> bool {
121         match self.status {                                     138         matches!(self.status, Status::Open)
122             Status::Open => true,                               ... 
123             _ => false,                                         ... 
124         }                                                       ... 
125     }                                                           139     }
126                                                                 140 
127     fn remove_commit_message(&mut self, id: u64) {              141     fn remove_commit_message(&mut self, id: u64) {
128         self.commit_messages.remove(id);                        142         self.commit_messages.remove(id);
129     }                                                           143     }
130                                                                 ... 
131     // /// if status is open, change to closed.if it is `Marked ... 
... Asdelete`, reset count(default: 10).                            ... 
132     // fn update_status(&mut self) {                            ... 
133     //     self.status = match self.status {                    ... 
134     //         Status::Open => Status::Closed(C),               ... 
135     //         Status::Closed => Status::Archived,              ... 
136     //         Status::Archived => Status::MarkedAsdelete(10),  ... 
137     //         Status::MarkedAsdelete(_) => Status::MarkedAsdel ... 
... ete(10),                                                        ... 
138     //     };                                                   ... 
139     // }                                                        ... 
140                                                                 144 
141     pub fn is_delete_marked(&self) -> bool {                    145     pub fn is_delete_marked(&self) -> bool {
142         matches!(self.status, Status::MarkedAsDelete(_))        146         matches!(self.status, Status::MarkedAsDelete(_))

src/lib.rs --- 3/5 --- Rust
174 178         self.set_delete_count(10)
175 179     }
176 ... 
177 ...     // /// edit body path
178 ...     // fn edit_body_path(&mut self, new_path: PathBuf) {
179 ...     //     self.commit_messages = new_path;
180 ...     // }
181 180 
182 181     /// decrement delete flag count
183 182     fn decrement_delete_count(&mut self) {

src/lib.rs --- 4/5 --- Rust
484 479     }
485 480 }
... 481 
... 482 impl Display for Project {
... 483     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
... 484         let tagss = self
... 485             .tags
... 486             .iter()
... 487             .map(|f| {
... 488                 let mut a = f.clone();
... 489                 a.push(',');
... 490                 a
... 491             })
... 492             .collect::<String>();
... 493 
... 494         let bodys = self
... 495             .body
... 496             .iter()
... 497             .map(|f| {
... 498                 let c = f;
... 499                 format!(
... 500                     "\t#{} {}\n\t{}\n\t{:?}\n\n",
... 501                     c.0, c.1.title, c.1.status, c.1.tags
... 502                 )
... 503             })
... 504             .collect::<String>();
... 505 
... 506         let project_sum = format!(
... 507             "title: {}\ntags: {}\nIssues: \n{}",
... 508             self.project_name, tagss, bodys
... 509         );
... 510         write!(f, "{}", project_sum)
... 511     }
... 512 }
... 513 
... 514 impl Project {
... 515     // i dont know whether it works correctly
... 516     pub fn filterd_string(&self, filter_id: Vec<u64>) -> String {
... 517         let tagss = self
... 518             .tags
... 519             .iter()
... 520             .map(|f| {
... 521                 let mut a = f.clone();
... 522                 a.push(',');
... 523                 a
... 524             })
... 525             .collect::<String>();
... 526         let bodys = filter_id
... 527             .iter()
... 528             .map(|c| {
... 529                 self.body
... 530                     .iter()
... 531                     .filter(|f| f.0 == c)
... 532                     .map(|e| format!("\t#{} {}\n", e.0, e.1.title,))
... 533                     .collect::<String>()
... 534             })
... 535             .collect::<String>();
... 536         format!(
... 537             "title: {}\ntags: {}\nIssues: \n{}",
... 538             self.project_name, tagss, bodys
... 539         )
... 540     }
... 541     pub fn oneline_fmt(&self) -> String {
... 542         let tagss = self
... 543             .tags
... 544             .iter()
... 545             .map(|f| {
... 546                 let mut a = f.clone();
... 547                 a.push(',');
... 548                 a
... 549             })
... 550             .collect::<String>();
... 551 
... 552         let bodys = self
... 553             .body
... 554             .iter()
... 555             .map(|f| format!("\t#{} {}\n", f.0, f.1.title))
... 556             .collect::<String>();
... 557 
... 558         format!(
... 559             "title: {}\ntags: {}\nIssues: \n{}",
... 560             self.project_name, tagss, bodys
... 561         )
... 562     }
... 563 }
486 564 
487 565 #[cfg(test)]
488 566 mod tests {

src/lib.rs --- 5/5 --- Rust
507         pro.add_issue(Issue::new("issute1", None, crate::Status 585         pro.add_issue(Issue::new("issute1", None, crate::Status
... ::Open, None));                                                 ... ::Open, None));
508         pro.add_issue(Issue::new("title2", None, crate::Status: 586         pro.add_issue(Issue::new("title2", None, crate::Status:
... :Open, None));                                                  ... :Open, None));
509         pro.edit_issue_title(2, "new_title7");                  587         pro.edit_issue_title(2, "new_title7");
...                                                                 588         // pro.save().unwrap();
...                                                                 589 
...                                                                 590         println!("{}", pro);
510         pro.save().unwrap();                                    591         println!("{}", pro.oneline_fmt());
...                                                                 592         let ids = vec![1];
...                                                                 593         println!("{}", pro.filterd_string(ids));
511     }                                                           594     }
512 }                                                               595 }

